- if f.object.health_file.present? && f.object.health_file.file.present?
  .form-group
    %label Existing File
    %div
      .btn-group.existing-file
        - download_path = f.object.health_file.persisted? ? polymorphic_path([:download] + sdh_case_management_note_path_generator, client_id: @client.id, id: f.object.id ) : 'javascript:void(0)' 
        - download_data = f.object.health_file.persisted? ? {} : {confirm: 'Form errors must be fixed before you can download the file.'}
        = link_to download_path, class: 'btn btn-default', data: download_data do
          = f.object.health_file&.name
        = link_to polymorphic_path([:remove_file] + sdh_case_management_note_path_generator, client_id: @client.id, id: f.object.id), class: 'btn btn-danger btn-icon-only', method: :delete, remote: true do
          %span.icon-cross{style: 'color: white;margin:0;'}
  = f.simple_fields_for :health_file do |hf|
    = hf.input :file, as: :file, input_html: {style: 'display:none;'}, label: false
    = hf.input :file_cache, as: :hidden
    = hf.input :note, as: :text, input_html: {rows: 10}, label: 'File description'

- elsif f.object.health_file.present?
  = f.simple_fields_for :health_file do |hf|
    = hf.input :file, as: :file
    = hf.input :file_cache, as: :hidden
    = hf.input :note, as: :text, input_html: {rows: 10}, label: 'File description'
- else
  = f.simple_fields_for Health::SdhCaseManagementNoteFile.new() do |hf|
    = hf.input :file, as: :file
    = hf.input :file_cache, as: :hidden
    = hf.input :note, as: :text, input_html: {rows: 10}, label: 'File description'
