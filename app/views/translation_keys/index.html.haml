- locales = TranslationKey.available_locales
.row
  .col-sm-12
    = simple_form_for :search, as: :search, url: translation_keys_path, method: :get do |f|
      = text_field :search, :q, value: @search.try(:[], :q)
      = f.button :submit, value: 'Search for Key'
      
    = simple_form_for :language, as: :language, url: translation_keys_path, method: :get do |f|
      = f.input :missing_lang, label: 'Missing Translations in Locale', collection: locales, include_blank: true
      = f.button :submit, value: 'Find Missing Translations'
      
.row.table-utilities
  .col-sm-4
    %p=# page_entries_info @translation_keys
.row 
  .col-sm-12
    - if @translation_keys.present?
      %table.table-striped.table-bordered.table-condensed
        %thead
          %tr
            %th Keys
            - locales.each do |locale|
              %th= locale
        %tbody
          - @translation_keys.each do |key|
            %tr{:class => "#{cycle "even","odd"}"}
              %td= key.key
              - locales.each do |locale|
                - translation = key.translations.detect{|t| t.locale == locale }
                %td= translation.text if translation
              %td
                = link_to "Edit", edit_translation_key_path(key)
