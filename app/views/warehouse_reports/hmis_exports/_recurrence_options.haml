.row
  .col-sm-12
    %h4 Recurring Reports
    %p
      Setting a report to run every (n) days, will result in the report being created now, and then automatically
      generated on the specified schedule. A recurring report can be configured to always cover the same date range,
      or a sliding range based on the date the report is run.
.row
  .col-sm-4
    = f.input :every_n_days, as: :numeric, label: 'Run every (n) days:', input_html: { class: 'jRecurringDays' }
  .col-sm-4.jDependentRecurringFields
    = f.input :reporting_range, collection: GrdaWarehouse::RecurringHmisExport.available_reporting_ranges, label: 'For period:', selected: 'fixed', input_html: {class: 'jReportingRange'}
  .col-sm-4
    = f.input :reporting_range_days, as: :numeric, disabled: true, label: '&nbsp;'.html_safe, input_html: {class: 'jReportingRangeDays'}


= content_for :page_js do
  :javascript
    $('.jRecurringDays').on('keyup', function(e) {
      var value = $('.jRecurringDays').val();
      if(value == 0){
        $('.jDependentRecurringFields').hide();
      }
      else {
        $('.jDependentRecurringFields').show();
      }
    });
    $('.jReportingRange').on('change', function (e) {
      var value = $(".jReportingRange").val();
      if(value == "n_days") {
        $(".jReportingRangeDays").removeAttr("disabled");
        $(".jReportingRangeDays").show();
      }
      else {
        $(".jReportingRangeDays").attr('disabled', 'disabled');
        $(".jReportingRangeDays").hide();
      }
    });
    $('.jReportingRange').trigger('change');
    $('.jRecurringDays').trigger('keyup');
